<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Timer</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }
        .countdown {
            font-size: 24px;
            margin: 10px 0;
        }
        .strikethrough {
            text-decoration: line-through;
            color: gray;
        }
        .task {
            font-size: 18px;
        }
        .subtask {
            font-size: 14px;
            color: lightgray;
        }
    </style>
</head>
<body>
    <h1>Отсчет до встречи:</h1>
    <div class="countdown" id="countdownMeeting">00:00:00</div>
    <input type="checkbox" id="checkMeeting" onchange="saveCheckboxState('checkMeeting')"> Завершено

    <h1 class="subtask">Подзадача: До покупки билетов осталось:</h1>
    <div class="countdown" id="countdownTicket">00:00:00</div>
    <input type="checkbox" id="checkTicket" onchange="saveCheckboxState('checkTicket')"> Завершено

    <h1 class="subtask">Подзадача: Отправка SDEK:</h1>
    <div class="countdown" id="countdownSDEK">00:00:00</div>
    <input type="checkbox" id="checkSDEK" onchange="saveCheckboxState('checkSDEK')"> Завершено

    <h1 class="subtask">Подзадача: Сбор вещей:</h1>
    <div class="countdown" id="countdownPacking">00:00:00</div>
    <input type="checkbox" id="checkPacking" onchange="saveCheckboxState('checkPacking')"> Завершено

    <h1 class="subtask">Подзадача: Купить билет в Питер:</h1>
    <div class="countdown" id="countdownTicketFromVN">00:00:00</div>
    <input type="checkbox" id="checkTicketFromVN" onchange="saveCheckboxState('checkTicketFromVN')"> Завершено

    <h1 class="subtask">Подзадача: Купить чемодан:</h1>
    <div class="countdown" id="countdownBuySuitcase">00:00:00</div>
    <input type="checkbox" id="checkBuySuitcase" onchange="saveCheckboxState('checkBuySuitcase')"> Завершено

    <script>
        // Функция запуска отсчетов
        function startCountdowns() {
            const meetingDate = new Date("2024-11-30T00:00:00").getTime();
            const ticketDate = new Date("2024-11-05T00:00:00").getTime();
            const sdekDate = new Date("2024-11-29T00:00:00").getTime();
            const packingDate = new Date("2024-11-28T00:00:00").getTime();
            const ticketFromVNDate = new Date("2024-11-10T00:00:00").getTime(); // Примерная дата
            const buySuitcaseDate = new Date("2024-11-02T00:00:00").getTime(); // Примерная дата

            setInterval(() => updateCountdown(meetingDate, "countdownMeeting"), 1000);
            setInterval(() => updateCountdown(ticketDate, "countdownTicket"), 1000);
            setInterval(() => updateCountdown(sdekDate, "countdownSDEK"), 1000);
            setInterval(() => updateCountdown(packingDate, "countdownPacking"), 1000);
            setInterval(() => updateCountdown(ticketFromVNDate, "countdownTicketFromVN"), 1000);
            setInterval(() => updateCountdown(buySuitcaseDate, "countdownBuySuitcase"), 1000);
        }

        // Обновление отсчета
        function updateCountdown(targetDate, elementId) {
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance < 0) {
                document.getElementById(elementId).innerHTML = "Время вышло";
                return;
            }

            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById(elementId).innerHTML = `${hours}ч ${minutes}м ${seconds}с`;
        }

        // Сохранение состояния чекбоксов
        function saveCheckboxState(checkboxId) {
            const checkbox = document.getElementById(checkboxId);
            const state = checkbox.checked;
            localStorage.setItem(checkboxId, state);
            updateCheckboxStyle(checkbox, state);
        }

        // Обновление стиля чекбокса
        function updateCheckboxStyle(checkbox, state) {
            if (state) {
                checkbox.parentElement.classList.add("strikethrough");
            } else {
                checkbox.parentElement.classList.remove("strikethrough");
            }
        }

        // Загрузка состояния чекбоксов
        function loadCheckboxState(checkboxId) {
            const state = localStorage.getItem(checkboxId) === 'true';
            const checkbox = document.getElementById(checkboxId);
            checkbox.checked = state;
            updateCheckboxStyle(checkbox, state);
        }

        // Загрузка состояния чекбоксов при загрузке страницы
        document.addEventListener("DOMContentLoaded", () => {
            loadCheckboxState("checkMeeting");
            loadCheckboxState("checkTicket");
            loadCheckboxState("checkSDEK");
            loadCheckboxState("checkPacking");
            loadCheckboxState("checkTicketFromVN");
            loadCheckboxState("checkBuySuitcase");
            startCountdowns();
        });
    </script>
</body>
</html>
