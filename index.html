<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Timer</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        h1 {
            font-size: 36px;
            color: #FFD700; /* Золотистый цвет для главной задачи */
        }
        .countdown {
            font-size: 24px;
            margin: 20px 0;
        }
        .task {
            margin: 10px 0;
            font-size: 20px; /* Уменьшение шрифта подзадач */
            color: lightgray; /* Более светлый цвет для подзадач */
        }
        .checkbox {
            margin-right: 10px;
        }
        .completed {
            text-decoration: line-through;
            color: gray;
        }
        .highlight {
            color: #FFD700; /* Золотистый цвет для главной задачи */
        }
    </style>
</head>
<body>

<h1>Отсчет до встречи</h1>
<div id="countdown-1" class="countdown"></div>

<h2 class="highlight">Главная задача</h2>

<div class="task">
    <div id="countdown-2" class="countdown"></div>
    <input type="checkbox" class="checkbox" id="task-1" onchange="toggleTask(this, 'task-1-text', 'countdown-2')">
    <span id="task-1-text">Отправка СДЭК до 29 ноября</span>
</div>
<div class="task">
    <div id="countdown-3" class="countdown"></div>
    <input type="checkbox" class="checkbox" id="task-2" onchange="toggleTask(this, 'task-2-text', 'countdown-3')">
    <span id="task-2-text">Сбор вещей до 28 ноября</span>
</div>
<div class="task">
    <div id="countdown-4" class="countdown"></div>
    <input type="checkbox" class="checkbox" id="task-3" onchange="toggleTask(this, 'task-3-text', 'countdown-4')">
    <span id="task-3-text">Покупка билета до 5 ноября</span>
</div>
<div class="task">
    <div id="countdown-5" class="countdown"></div>
    <input type="checkbox" class="checkbox" id="task-4" onchange="toggleTask(this, 'task-4-text', 'countdown-5')">
    <span id="task-4-text">Купить чемодан до 3 ноября</span>
</div>

<script>
    // Сохранение состояния чекбоксов в локальном хранилище
    function saveCheckboxState() {
        const checkboxes = document.querySelectorAll('.checkbox');
        checkboxes.forEach(checkbox => {
            localStorage.setItem(checkbox.id, checkbox.checked);
        });
    }

    // Восстановление состояния чекбоксов из локального хранилища
    function loadCheckboxState() {
        const checkboxes = document.querySelectorAll('.checkbox');
        checkboxes.forEach(checkbox => {
            const checked = localStorage.getItem(checkbox.id) === 'true';
            checkbox.checked = checked;
            toggleTask(checkbox, checkbox.nextElementSibling.id, checkbox.parentElement.firstElementChild.id);
        });
    }

    // Функция для вычисления времени до события
    function calculateCountdown(endTime, elementId) {
        const now = new Date().getTime();
        const distance = endTime - now;

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        const countdownElement = document.getElementById(elementId);
        if (distance < 0) {
            countdownElement.innerHTML = "Время вышло!";
        } else {
            countdownElement.innerHTML = days + " дней " + hours + " часов "
                + minutes + " минут " + seconds + " секунд ";
        }
    }

    // Обновление таймера
    setInterval(() => {
        const endTime1 = new Date("2024-11-30T00:00:00").getTime();
        const endTime2 = new Date("2024-11-05T00:00:00").getTime();
        const endTime3 = new Date("2024-11-29T00:00:00").getTime();
        const endTime4 = new Date("2024-11-28T00:00:00").getTime();
        const endTime5 = new Date("2024-11-03T00:00:00").getTime();

        calculateCountdown(endTime1, "countdown-1");
        calculateCountdown(endTime2, "countdown-2");
        calculateCountdown(endTime3, "countdown-3");
        calculateCountdown(endTime4, "countdown-4");
        calculateCountdown(endTime5, "countdown-5");
    }, 1000);

    // Функция для обработки завершения задачи
    function toggleTask(checkbox, taskId, countdownId) {
        const taskText = document.getElementById(taskId);
        const countdownText = document.getElementById(countdownId);
        if (checkbox.checked) {
            taskText.classList.add('completed');
            countdownText.classList.add('completed');
            countdownText.innerHTML = "Задача выполнена!";
        } else {
            taskText.classList.remove('completed');
            countdownText.classList.remove('completed');
            countdownText.innerHTML = ""; // Очищаем текст при снятии галочки
        }
        saveCheckboxState(); // Сохраняем состояние чекбоксов
    }

    // Загружаем состояние чекбоксов при загрузке страницы
    window.onload = loadCheckboxState;
</script>

</body>
</html>
